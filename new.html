<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="newStyle.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="client.js"></script>
</head>

<style type="text/css">

</style>

<body>
<h1>DocMeet</h1>

<h2>New Visit</h2>

<label>Please Enter Your Name:  <input class="text1" type="text" id="nameText" value=""></label>
<br />
<br />
<label>Please Enter Your ID Number:  <input class="text2" type="text" id="idText" value=""></label>
<br />
<br />
<label for="visit">Purpose for Visit: </label>
<select name="visit" id="visit" onChange = "changetextbox();">
  <option value="blank">Choose Option</option>
  <option value="vitals">Check Vitals</option>
  <option value="meds">Administer Medication</option>
  <option value="clean">Cleaning</option>
  <option value="food">Food Delivery</option>
  <option value="insurance">Insurance Inquiry</option>
  <option value="other">Other</option>
</select>
<input type = "text" name = "optionalBox" id = "optBox" disabled = "true">
<br />
<br />
<button class = "submitButton" type="button" onclick="sendVisit()">Submit New Visit</button>

<script>
function changetextbox()
{
    if (document.getElementById("visit").value === "other") {
        document.getElementById("optBox").disabled=false;
    } else {
        document.getElementById("optBox").disabled=true;
        document.getElementById("optBox").value = ""
    }
}
function sendVisit() {
    let name = document.getElementById("nameText").value;
    let id = document.getElementById("idText").value;
    let reason = document.getElementById("visit").value;
    if (name != "" && id != "") {
        let data = {
            "id": 1,
            "date": "today",
            "time": "now",
            "who": name,
            "reason": reason
        };
        $.ajax({
            type: 'POST',
            url: "/",
            data: JSON.stringify(data),
            success: function(response) {

            },
            error: function(response) {

            }
        })
    }
}
</script>

</body>

</html>