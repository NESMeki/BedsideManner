<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="newStyle.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        input {
         text-align:center;
         font-family: 'gilroy-light';
        }
    </style>
    <style>
        body {
         text-align:center;
         font-family: 'gilroy-extrabold';
        }
    </style>
    <style>
        html {
            background-image:
            url('etc.jpg');
            background-repeat: no-repeat;
            background-position: bottom;
            background-size: 25%;
            height: 100%;
            overflow: hidden;
            
        }
    </style>
</head>

<style type="text/css">

</style>

<body>
<h1>DocMeet</h1>

<h2>New Visit</h2>

<input class="textBox" type="text" id="nameText" placeholder= "Enter Name . . . " value="">
<br />
<br />
<input class="textBox" type="text" placeholder="Enter Employee ID . . ." id="idText" value="">
<br />
<h4>Choose Visit Purpose</h4>
<select class = "dropDown" name="visit" id="visit"  onChange = "changetextbox();">
  <option value="blank">  </option>
  <option value="vitals">Check Vitals</option>
  <option value="meds">Administer Medication</option>
  <option value="clean">Cleaning</option>
  <option value="food">Food Delivery</option>
  <option value="insurance">Insurance Inquiry</option>
  <option value="other">Other</option>
</select>
<input class = "textBox" type = "text" style="align-self: auto" placeholder = "Other Visit . . ." name = "optionalBox" id = "optBox" disabled = "true">
<br />
<br />
<button class = "submitButton" onclick="sendVisit()" type="button">Submit New Visit</button>

<script>
function changetextbox()
{
    if (document.getElementById("visit").value === "other") {
        document.getElementById("optBox").disabled=false;
    } else {
        document.getElementById("optBox").disabled=true;
        document.getElementById("optBox").value = ""
    }
}

function sendVisit() {
    let name = document.getElementById("nameText").value;
    let id = document.getElementById("idText").value;
    let reason = document.getElementById("visit").value;
    if (name != "" && id != "") {
        let visit = {
            "id": id,
            "date": "today",
            "time": "now",
            "who": name,
            "reason": reason
        };

        $.ajax({
            method: 'POST', 
            url: "http://localhost:8000/",
            data: visit,
            success: function (data) {
                console.log('Success: ' + JSON.stringify(data));
            },
            error: function (xhr, status, error) {
                console.log('Error: ' + error.message);
            }
        });

        

        
    }
}
</script>

</body>

</html>